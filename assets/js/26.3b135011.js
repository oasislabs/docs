(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{372:function(e,t,s){"use strict";s.r(t);var a=s(42),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"troubleshooting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[e._v("BEFORE YOU BEGIN TROUBLESHOOTING")]),e._v(" "),s("p",[e._v("Before you begin troubleshooting we suggest you check all of the following:")]),e._v(" "),s("ul",[s("li",[e._v("Check that your current binary version is the latest listed on the "),s("RouterLink",{attrs:{to:"/operators/current-testnet-parameters.html"}},[e._v("current\ntestnet parameters")]),e._v(" "),s("ul",[s("li",[e._v("Check the version on your localhost using "),s("code",[e._v("oasis-node --version")])]),e._v(" "),s("li",[e._v("Check the version on your server using "),s("code",[e._v("oasis-node --version")])])])],1),e._v(" "),s("li",[e._v("If upgrading, make sure that you've wiped state (unless that is explicitly not\nrequired)")]),e._v(" "),s("li",[e._v("If you're doing anything with the entity:\n"),s("ul",[s("li",[e._v("Do you have the latest genesis?")]),e._v(" "),s("li",[e._v("Do you have the correct private key (or Ledger device).")]),e._v(" "),s("li",[e._v("If you're signing a transaction:\n"),s("ul",[s("li",[e._v("Do you sufficient account balance to make the transaction?\n"),s("ul",[s("li",[e._v("Run "),s("code",[e._v("oasis-node stake account info")])])])]),e._v(" "),s("li",[e._v("Are you using the correct nonce?\n"),s("ul",[s("li",[e._v("Run "),s("code",[e._v("oasis-node stake account info")])])])])])])])]),e._v(" "),s("li",[e._v("If you're generating a transaction:\n"),s("ul",[s("li",[e._v("Do you have the latest genesis?")])])]),e._v(" "),s("li",[e._v("If you're submitting a transaction:\n"),s("ul",[s("li",[e._v("Do you have the latest genesis?")]),e._v(" "),s("li",[e._v("Is your node synced? If not, the transaction will fail to run properly")])])])])]),e._v(" "),s("h2",{attrs:{id:"running-a-node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#running-a-node"}},[e._v("#")]),e._v(" Running a Node")]),e._v(" "),s("h3",{attrs:{id:"invalid-permissions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#invalid-permissions"}},[e._v("#")]),e._v(" Invalid Permissions")]),e._v(" "),s("h4",{attrs:{id:"permissions-for-node-and-entity"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#permissions-for-node-and-entity"}},[e._v("#")]),e._v(" Permissions for node and entity")]),e._v(" "),s("p",[e._v("Error Message:")]),e._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("common/Mkdir: path '/serverdir/node' has invalid permissions: -rwxr-xr-x\n")])])]),s("p",[e._v("The "),s("code",[e._v("entity")]),e._v(" and "),s("code",[e._v("node")]),e._v(" directories both need to have permissions "),s("code",[e._v("rwx------")]),e._v(".\nMake sure you initialize the directory with correct permissions or change them\nusing "),s("code",[e._v("chmod")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" --mode "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("700")]),e._v(" --parents "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("entity,node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("700")]),e._v(" /serverdir/node\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("700")]),e._v(" /serverdir/entity\n")])])]),s("h4",{attrs:{id:"permissions-for-pem-files"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#permissions-for-pem-files"}},[e._v("#")]),e._v(" Permissions for .pem files")]),e._v(" "),s("p",[e._v("Error Message example:")]),e._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("signature/signer/file: invalid PEM file permissions 700 on /serverdir/node/identity.pem\n")])])]),s("p",[e._v("All "),s("code",[e._v(".pem")]),e._v(" files should have the permissions "),s("code",[e._v("600")]),e._v(".\nYou can set the permissions for all "),s("code",[e._v(".pem")]),e._v(" files in a directory using the\nfollowing command:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" -R "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("600")]),e._v(" /path/*.pem\n")])])]),s("h4",{attrs:{id:"serverdir-ownership"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#serverdir-ownership"}},[e._v("#")]),e._v(" Serverdir Ownership")]),e._v(" "),s("p",[e._v("Another possible cause of permission issues is not giving ownership of your\n"),s("code",[e._v("serverdir")]),e._v(" to the user running the node (e.g. "),s("code",[e._v("docker-host")]),e._v(" or replace with\nyour user):")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("chown")]),e._v(" -R docker-host:docker-host /serverdir\n")])])]),s("p",[e._v("In general, to avoid problems when running docker, specify the user when\nrunning "),s("code",[e._v("docker")]),e._v(" commands by adding the flag "),s("code",[e._v("--user $(id -u):$(id -g)")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"cannot-find-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cannot-find-file"}},[e._v("#")]),e._v(" Cannot Find File")]),e._v(" "),s("p",[e._v("Error Message examples:")]),e._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("no such file or directory\n")])])]),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("file does not exist\n")])])]),e._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('ts=2019-11-17T03:42:09.778647033Z level=error module=cmd/registry/node caller=node.go:127 msg="failed to load entity" err="file does not exist"\n')])])]),e._v(" "),s("p",[e._v("More often than you'd expect, this error is the result of setting the path\nincorrectly.\nYou may have left something like "),s("code",[e._v("--genesis.file $GENESIS_FILE_PATH")]),e._v(" in the\ncommand without setting "),s("code",[e._v("$GENESIS_FILE_PATH")]),e._v(" first, or set the path incorrectly.\nCheck that "),s("code",[e._v("echo $GENESIS_FILE_PATH")]),e._v(" matches your expectation or provide a path\nin the command.")]),e._v(" "),s("p",[e._v("Another possible cause: the files in your localhost directory cannot be read\nfrom the container. Make sure to run commands in the same session within the\ncontainer.")]),e._v(" "),s("h2",{attrs:{id:"staking-and-registering"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#staking-and-registering"}},[e._v("#")]),e._v(" Staking and Registering")]),e._v(" "),s("h3",{attrs:{id:"transaction-out-of-gas"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transaction-out-of-gas"}},[e._v("#")]),e._v(" Transaction Out of Gas")]),e._v(" "),s("p",[e._v("Error message:")]),e._v(" "),s("div",{staticClass:"language-text extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('module=cmd/stake caller=stake.go:70 msg="failed to submit transaction" err="rpc error: code = Unknown desc = staking: add escrow transaction failed: out of gas" attempt=1\n')])])]),e._v(" "),s("p",[e._v("The docs are now updated to show that you need to add\n"),s("code",[e._v("--stake.transaction.fee.gas")]),e._v(" and "),s("code",[e._v("--stake.transaction.fee.amount")]),e._v(" flags when\ngenerating your transaction. Note that if you're re-generating a transaction,\nyou will need to increment the "),s("code",[e._v("--nonce")]),e._v(" flag.")])])}),[],!1,null,null,null);t.default=n.exports}}]);