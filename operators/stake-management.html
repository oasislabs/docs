<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Stake Management | Oasis Dev Docs</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/favicon.ico">
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-116576458-1"></script>
    <script>window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'UA-116576458-1');</script>
    <meta name="description" content="Oasis Developer Documentation">
    <link rel="preload" href="/assets/css/0.styles.8c9139b3.css" as="style"><link rel="preload" href="/assets/js/app.581d73a6.js" as="script"><link rel="preload" href="/assets/js/2.00a45a85.js" as="script"><link rel="preload" href="/assets/js/24.b87dffc3.js" as="script"><link rel="prefetch" href="/assets/js/10.a4f20793.js"><link rel="prefetch" href="/assets/js/11.f48035be.js"><link rel="prefetch" href="/assets/js/12.62ee0d40.js"><link rel="prefetch" href="/assets/js/13.39e78f76.js"><link rel="prefetch" href="/assets/js/14.7784d418.js"><link rel="prefetch" href="/assets/js/15.9fc8ff30.js"><link rel="prefetch" href="/assets/js/16.24e867cc.js"><link rel="prefetch" href="/assets/js/17.a7fd5861.js"><link rel="prefetch" href="/assets/js/18.07551979.js"><link rel="prefetch" href="/assets/js/19.79d47276.js"><link rel="prefetch" href="/assets/js/20.552224c6.js"><link rel="prefetch" href="/assets/js/21.1756f885.js"><link rel="prefetch" href="/assets/js/22.f714f7af.js"><link rel="prefetch" href="/assets/js/23.7a167865.js"><link rel="prefetch" href="/assets/js/25.df537809.js"><link rel="prefetch" href="/assets/js/26.6e4444dd.js"><link rel="prefetch" href="/assets/js/27.277fa4dd.js"><link rel="prefetch" href="/assets/js/3.0272127c.js"><link rel="prefetch" href="/assets/js/4.ca674146.js"><link rel="prefetch" href="/assets/js/5.523f166b.js"><link rel="prefetch" href="/assets/js/6.3a98ac05.js"><link rel="prefetch" href="/assets/js/7.0bcf9d6e.js"><link rel="prefetch" href="/assets/js/8.2836b64e.js"><link rel="prefetch" href="/assets/js/9.9a4a40d1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c9139b3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Oasis Dev Docs" class="logo"> <span class="site-name can-hide">Oasis Dev Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://oasisprotocol.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://join.slack.com/t/oasiscommunity/shared_invite/enQtNjQ5MTA3NTgyOTkzLWIxNTg1ZWZmOTIwNmQ2MTg1YmU0MzgyMzk3OWM2ZWQ4NTQ0ZDJkNTBmMTdlM2JhODllYjg5YmJkODc2NzgwNTg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://oasisprotocol.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://join.slack.com/t/oasiscommunity/shared_invite/enQtNjQ5MTA3NTgyOTkzLWIxNTg1ZWZmOTIwNmQ2MTg1YmU0MzgyMzk3OWM2ZWQ4NTQ0ZDJkNTBmMTdlM2JhODllYjg5YmJkODc2NzgwNTg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/oasisprotocol" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/overview.html" class="sidebar-link">Overview</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Operator Docs</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/operators/overview.html" class="sidebar-link">Node Operator Overview</a></li><li><a href="/operators/architecture-overview.html" class="sidebar-link">Network Architecture Overview</a></li><li><a href="/operators/prerequisites.html" class="sidebar-link">Prerequisites Guide</a></li><li><a href="/operators/amber-network.html" class="sidebar-link">Amber Network</a></li><li><a href="/operators/community-node.html" class="sidebar-link">Community Node Program</a></li><li><a href="/operators/hardware-recommendations.html" class="sidebar-link">Node Hardware Recommendations</a></li><li><a href="/operators/running-node-on-amber-network.html" class="sidebar-link">Running a Node on the Amber Network</a></li><li><a href="/operators/creating-an-entity-package.html" class="sidebar-link">Creating an Entity Package</a></li><li><a href="/operators/migrating-questnet-entities.html" class="sidebar-link">Migrating Your QuestNet Entity for the Amber Network</a></li><li><a href="/operators/current-testnet-parameters.html" class="sidebar-link">Current Testnet Parameters</a></li><li><a href="/operators/stake-management.html" aria-current="page" class="active sidebar-link">Stake Management</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/operators/stake-management.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/operators/stake-management.html#common-token-info" class="sidebar-link">Common token info</a></li><li class="sidebar-sub-header"><a href="/operators/stake-management.html#obtaining-account-address-from-entity-s-id" class="sidebar-link">Obtaining account address from entity's ID</a></li><li class="sidebar-sub-header"><a href="/operators/stake-management.html#account-info" class="sidebar-link">Account info</a></li><li class="sidebar-sub-header"><a href="/operators/stake-management.html#generating-and-submitting-transactions" class="sidebar-link">Generating and submitting transactions</a></li><li class="sidebar-sub-header"><a href="/operators/stake-management.html#example-transactions" class="sidebar-link">Example transactions</a></li></ul></li><li><a href="/operators/sentry-node.html" class="sidebar-link">Sentry Node Architecture</a></li><li><a href="/operators/incentives-proposal.html" class="sidebar-link">Network Incentives Proposal</a></li><li><a href="/operators/the-quest-rules.html" class="sidebar-link">The Quest Rules</a></li><li><a href="/operators/troubleshooting.html" class="sidebar-link">Troubleshooting Guide</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Maintenance Guides</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Wallet Support</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/operators/community-resources.html" class="sidebar-link">Community Tools</a></li><li><a href="https://github.com/oasisprotocol/oasis-core/blob/master/docs/index.md" target="_blank" rel="noopener noreferrer" class="sidebar-link">Oasis Core Developer Docs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="stake-management"><a href="#stake-management" class="header-anchor">#</a> Stake Management</h1> <p>For node operators, the <code>oasis-node</code> binary offers a command line interface for
various staking operations.</p> <p>The following commands are intended to be run <strong>online</strong> (i.e. on the <code>server</code>):</p> <ul><li><code>oasis-node stake info</code> shows the token information,</li> <li><code>oasis-node stake list</code> lists all accounts with positive balance,</li> <li><code>oasis-node stake account info</code> shows detailed account information,</li> <li><code>oasis-node consensus submit_tx</code> submits a pre-generated transaction given a
filename.</li></ul> <p>In addition, the following commands generate transactions and are meant to be
run offline (i.e. on the <code>localhost</code>), because signing transactions requires a
private key which <strong>should not be accessible</strong> from outside in any way:</p> <ul><li><code>oasis-node stake account gen_transfer</code></li> <li><code>oasis-node stake account gen_burn</code></li> <li><code>oasis-node stake account gen_escrow</code></li> <li><code>oasis-node stake account gen_reclaim_escrow</code></li></ul> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <p>We will assume you are familiar with the previous sections of the
<a href="/operators/overview.html">Operator Docs</a> and have the <code>oasis-node</code> binary installed.</p> <p>To run a command that requires a connection to the online Oasis node (i.e. the
<code>server</code>), you need to either:</p> <ul><li>change the working directory to where the internal Oasis node unix socket is
located (e.g. <code>/serverdir/node/</code>) before executing the command, or</li> <li>pass the <code>-a $ADDR</code> flag where <code>ADDR</code> represents the path to the internal
Oasis node unix socket prefixed with <code>unix:</code> (e.g.
<code>unix:/serverdir/node/internal.sock</code>).</li></ul> <p>We will pipe the output of commands that return JSON through <a href="https://docs.python.org/3/library/json.html#module-json.tool" target="_blank" rel="noopener noreferrer">Python's
<code>json.tool</code> module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to pretty-print it.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Be aware that <a href="http://stedolan.github.io/jq/" target="_blank" rel="noopener noreferrer">jq<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, the popular JSON CLI tool, <a href="https://github.com/stedolan/jq/wiki/FAQ#caveats" target="_blank" rel="noopener noreferrer">converts all numbers to IEEE 754
64-bit values<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> which can result in silent loss of precision and/or
other changes.</p> <p>Hence, we recommend avoiding its usage until this issue is resolved.</p></div> <h2 id="common-token-info"><a href="#common-token-info" class="header-anchor">#</a> Common token info</h2> <p>To query an Oasis node for the common token info, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake info -a <span class="token variable">$ADDR</span>
</code></pre></div><p>This will output something like:</p> <div class="language-text extra-class"><pre class="language-text"><code>Total supply: 10000000000000000000
Common pool: 7999217230119682890
Last block fees: 0
Staking threshold (entity): 100000000000
Staking threshold (node-validator): 100000000000
Staking threshold (node-compute): 100000000000
Staking threshold (node-storage): 100000000000
Staking threshold (node-keymanager): 100000000000
Staking threshold (runtime-compute): 100000000000
Staking threshold (runtime-keymanager): 100000000000
</code></pre></div><p>The numbers are listed in base units, 1 token corresponds to 10^9 (i.e. one
billion) base units.</p> <p>We can observe that the total supply is 10 billion tokens and that almost 8
billion tokens are in the <em>common pool</em>.</p> <p>Finally, the staking thresholds for the entity, all node kinds (validator,
compute, storage) and all runtime kinds (compute, key manager) are 100 tokens.</p> <p>This means that if you want to register, e.g. an entity with a validator node,
you need to escrow (i.e. stake) at least 200 tokens.</p> <h2 id="obtaining-account-address-from-entity-s-id"><a href="#obtaining-account-address-from-entity-s-id" class="header-anchor">#</a> Obtaining account address from entity's ID</h2> <p>A staking account address is represented by a truncated hash of a
corresponding entity's public key, prefixed by a 1 byte address version.</p> <p>It uses <a href="https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki#bech32" target="_blank" rel="noopener noreferrer">Bech32 encoding<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for text serialization with <code>oasis</code> as its human
readable part (HRP) prefix.</p> <p>To convert an entity ID (Base64 encoded), e.g.
<code>nyjbDRKAXgUkL6CYfJP0WVA0XbF0pAGuvObZNMufgfY=</code>, to a staking account address,
run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake pubkey2address <span class="token punctuation">\</span>
  --public_key <span class="token assign-left variable">nyjbDRKAXgUkL6CYfJP0WVA0XbF0pAGuvObZNMufgfY</span><span class="token operator">=</span>
</code></pre></div><p>This will output the staking account address for the given entity ID:</p> <div class="language-text extra-class"><pre class="language-text"><code>oasis1qrvsa8ukfw3p6kw2vcs0fk9t59mceqq7fyttwqgx
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>You can find your entity's ID in the <code>id</code> field of the <code>entity.json</code> file.</p></div> <h2 id="account-info"><a href="#account-info" class="header-anchor">#</a> Account info</h2> <p>To list all accounts with positive balance, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake list -a <span class="token variable">$ADDR</span>
</code></pre></div><p>This will list all accounts' addresses, e.g.:</p> <div class="language-text extra-class"><pre class="language-text"><code>oasis1qqqfalz4xars9nxn0mjy8fcf9quqg8ml0szm5ped
oasis1qqqd4wrmk8z9p3hz0vyc6zy3khx3gqnckywyg2s5
oasis1qqqul8678xs9tnj74x54k8ch2qdh7jveeswqf67j
oasis1qqzrcyed78mkxmt9qpv3pemsugknnhvnpv8v5vc3
oasis1qqz0qcmy932p69493qdkszcf9emgl55azys3xr8f
oasis1qq95xthkg20ra6ue8zyngqkkm92xqkvrms88axkj
oasis1qq9meupznk90d4lgluvcaqa27ggs55dscc6msc33
oasis1qq9acq6v5knfmatc9fvuwyzlexs0f7j3uvarusu6
oasis1qqxqlpfslwuuh5342qnstymyutancj7csucxv2ec
oasis1qqxmp9lggptm0pt23za7g5cfg2hzspezcumw7c3j
oasis1qq89qxh538sunk6p2fca487pfsy0ncxk9q4xf2un
oasis1qq8hgj2yzssawtpfqr8utj6d57k9zvx3wc989kqm
oasis1qq8atykwecy3p5rnspkweapzz847exaqwyv80wgx
oasis1qqgv5rxl4w27l89rf4j5dv8392kh42wt35yn0as6
oasis1qqg0h3mt7klha4w2kxjvsktv5ke6suuwpg8rvpdh
oasis1qqf3ctyg49tnwclksxun3dzhrv4zuww7hu7w3cul
oasis1qqfasfrrx2tae50kcy8mcclhp0kqymswsqnqytyg
oasis1qq2rlaz3yjfk8gtdhnrfkrz5rrxjnnrzeq7mst0r

... output trimmed ...

</code></pre></div><p>To get more information about a particular account, e.g.
<code>oasis1qrvsa8ukfw3p6kw2vcs0fk9t59mceqq7fyttwqgx</code>, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account info <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --stake.account.address oasis1qrvsa8ukfw3p6kw2vcs0fk9t59mceqq7fyttwqgx <span class="token punctuation">\</span>
  <span class="token operator">|</span> python3 -m json.tool
</code></pre></div><p>This will output all staking information about this particular account, e.g.:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;376594833237&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10528683450039&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000000&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;commission_schedule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;stake_accumulator&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;claims&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;registry.RegisterEntity&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token string">&quot;entity&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token property">&quot;registry.RegisterNode.9Epy5pYPGa91IJlJ8Ivb5iby+2ii8APXdfQoMZDEIDc=&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token property">&quot;global&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node-validator&quot;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Account's general balance (<code>general.balance</code>), the amount of base units that
are available to the account owner, is ~377 tokens.</li> <li>Account's nonce (<code>general.nonce</code>), the incremental number that must be unique
for each account's transaction, is omitted. That means there haven't been any
transactions made with this account as the source.
Therefore, the next transaction should have nonce equal to <code>0</code>.</li></ul> <p>Each account can also serve as an escrow account.
Escrow accounts are used to keep the funds needed for specific consensus-layer
operations (e.g. registering and running nodes).</p> <p>To simplify accounting, each escrow results in the source account being issued
shares which can be converted back into staking tokens during the reclaim escrow
operation.
Reclaiming escrow does not complete immediately, but may be subject to a
debonding period during which the tokens still remain escrowed.</p> <p>We can observe that:</p> <ul><li>The amount of tokens that are actively bounded to the escrow account (
<code>escrow.active.balance</code>) is ~10529 tokens.</li> <li>The total number of shares for the tokens actively bounded to the escrow
account (<code>escrow.active.total_shares</code>) is 10 trillion.</li> <li>The amount of tokens that are currently debonding (<code>escrow.debonding.balance</code>)
is 0.</li> <li>The total number of shares for the tokens that are currently debonding
(<code>escrow.debonding.total_shares</code>) is 0.</li></ul> <p>An entity can also charge commission for tokens that are delegated to it.
The commission schedule rate steps would be defined in
<code>escrow.commission_schedule.rates</code> and the commission rate bound steps would be
defined in <code>escrow.commission_schedule.bounds</code>.
For more details, see the <a href="#amending-a-commission-schedule">Amending a commission schedule</a> example.</p> <p>Each escrow account also has a corresponding stake accumulator.
It stores stake claims for an escrow account and ensures all claims are
satisfied at any given point.
Adding a new claim is only possible if all of the existing claims plus the new
claim can be satisfied.</p> <p>We can observe that the stake accumulator currently has two claims:</p> <ul><li><p>The <code>registry.RegisterEntity</code> claim is for registering an entity.</p> <p>It needs to satisfy the global threshold (<code>global</code>) for registering an entity
(<code>entity</code>) which is defined by the staking consensus parameters.</p> <p>To see the value of the <code>entity</code> global staking threshold, run the
<code>oasis-node stake info</code> command as described in <a href="#common-token-info">Common token info</a> section.</p></li> <li><p>The <code>registry.RegisterNode.9Epy5pYPGa91IJlJ8Ivb5iby+2ii8APXdfQoMZDEIDc=</code> claim
is for registering the node with ID
<code>9Epy5pYPGa91IJlJ8Ivb5iby+2ii8APXdfQoMZDEIDc=</code>.</p> <p>It needs to satisfy the global threshold (<code>global</code>) for registering a
validator node (<code>node-validator</code>) which is defined by the staking consensus
parameters.</p> <p>To see the value of the <code>node-validator</code> global staking threshold, run the
<code>oasis-node stake info</code> command as described in <a href="#common-token-info">Common token info</a> section.</p> <p>In addition to the global thresholds, each runtime the node is registering for
may define their own thresholds. In case the node is registering for multiple
runtimes, it needs to satisfy the sum of thresholds of all the runtimes it is
registering for.</p> <p>For more details, see <a href="https://github.com/oasisprotocol/oasis-core/blob/master/docs/consensus/registry.md#register-node" target="_blank" rel="noopener noreferrer">Oasis Core Developer Docs on registering a node<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></li></ul> <h2 id="generating-and-submitting-transactions"><a href="#generating-and-submitting-transactions" class="header-anchor">#</a> Generating and submitting transactions</h2> <p>Next, we will learn how to generate and sign transactions offline (i.e. on the
<code>localhost</code>) and then submit them on the online Oasis node (i.e. the <code>server</code>).</p> <h3 id="base-flags"><a href="#base-flags" class="header-anchor">#</a> Base flags</h3> <p>All commands for generating and signing transactions need the following base
flags set:</p> <ul><li><code>--genesis.file</code>: Path to the genesis file on the <code>localhost</code>, e.g.
<code>/localhostdir/genesis.json</code>.</li></ul> <h3 id="signer-flags"><a href="#signer-flags" class="header-anchor">#</a> Signer flags</h3> <p>Currently, we provide two options for signing transactions:</p> <ul><li><p>Ledger device.</p> <p>You will need to set it up as described in our <a href="/hsm/ledger.html">Ledger docs</a> and set the
following flags:</p> <ul><li><p><code>--signer.backend ledger</code>: Specifies use of the Ledger signer.</p></li> <li><p><code>--signer.ledger.address</code>: The <code>Oasis App Address</code> that identifies the
Ledger device you want to use for signing.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>You can omit this flag and <code>oasis-node</code> will try to connect to any available
Ledger device.</p></div></li> <li><p><code>--signer.ledger.index</code>: Account index used to derive the staking account
address on the Ledger device.</p></li> <li><p><code>--signer.dir</code>: Path to entity's artifacts directory on the <code>localhost</code>,
e.g. <code>/localhostdir/entity/</code>.</p></li></ul></li> <li><p>Entity's private key stored in a file.</p> <p>You will need to create your Entity as described in <a href="/operators/running-node-on-amber-network.html#creating-your-entity">Running a Node on the
Amber Network</a> docs and set the following flags:</p> <ul><li><p><code>--signer.backend file</code>: Specifies use of the file signer.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Currently, <code>file</code> is the default signer so you could also omit this flag.</p></div></li> <li><p><code>--signer.dir</code>: Path to entity's artifacts directory on the <code>localhost</code>,
e.g. <code>/localhostdir/entity/</code>.</p></li></ul></li></ul> <h3 id="storing-base-and-signer-flags-in-an-environment-variable"><a href="#storing-base-and-signer-flags-in-an-environment-variable" class="header-anchor">#</a> Storing Base and Signer flags in an environment variable</h3> <p>To make the transaction commands shorter and avoid typing errors, one can set an
environment variable, e.g. <code>TX_FLAGS</code>, with all the <a href="#base-flags">Base flags</a> and
<a href="#signer-flags">Signer flags</a> configured for his particular set up.</p> <p>For example, one could set <code>TX_FLAGS</code> for a Ledger device like below (replacing
Ledger device address and address index appropriately):</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">TX_FLAGS</span><span class="token operator">=</span><span class="token string">&quot;--genesis.file /localhostdir/genesis.json \
  --signer.backend ledger \
  --signer.ledger.address oasis19hpt4y2reqwyfqcd53asjchdqf468chr673y6jn07xjp36w32jlscf0me \
  --signer.ledger.index 1 \
  --signer.dir /localhostdir/entity/&quot;</span>
</code></pre></div><p>Or, one could set <code>TX_FLAGS</code> like below to use a file signer:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">TX_FLAGS</span><span class="token operator">=</span><span class="token string">&quot;--genesis.file /localhostdir/genesis.json \
  --signer.backend file \
  --signer.dir /localhostdir/entity/&quot;</span>
</code></pre></div><h3 id="common-transaction-flags"><a href="#common-transaction-flags" class="header-anchor">#</a> Common transaction flags</h3> <p>When generating a transaction, one needs to set the following transaction flags
as appropriate for a given transaction:</p> <ul><li><p><code>--stake.amount</code>: Amount of base units to transfer, escrow, burn, etc.</p></li> <li><p><code>--transaction.file</code>: Path to the file where to store the generated
transaction.</p></li> <li><p><code>--transaction.nonce</code>: Incremental number that must be unique for each
account's transaction.</p> <p>To get your current account's nonce, see <a href="/operators/maintenance/checking-account-nonce.html">Checking Your Account nonce</a> doc.</p></li> <li><p><code>--transaction.fee.gas</code>: Maximum amount of gas (in <em>gas units</em>) a transaction
can spend.</p> <p>Gas costs for different staking transactions are specified by the
<code>staking.params.gas_costs</code> consensus parameter.</p> <p>To obtain its value from the genesis file, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> /localhostdir/genesis.json <span class="token operator">|</span> <span class="token punctuation">\</span>
  python3 -c <span class="token string">'import sys, json; \
  print(json.dumps(json.load(sys.stdin)[&quot;staking&quot;][&quot;params&quot;][&quot;gas_costs&quot;], indent=4))'</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Currently, gas costs for transactions are set in the genesis file and cannot
be changed. If updating consensus parameters is supported (tracked by
<a href="https://github.com/oasisprotocol/oasis-core/issues/2334" target="_blank" rel="noopener noreferrer">Oasis Core #2334<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>), this will no longer be the case.</p></div></li> <li><p><code>--transaction.fee.amount</code>: Amount of base units we will pay as a fee for a
transaction.</p></li></ul> <p>Note that specifying a transaction's fee amount (via <code>--transaction.fee.amount</code>)
and maximum gas amount (via <code>--transaction.fee.gas</code>) implicitly defines the
<em>gas price</em> (in base units):</p> <div class="language-text extra-class"><pre class="language-text"><code>gas_price = fee_amount / gas_amount
</code></pre></div><p>Gas price tells how much base units we are willing to pay for one gas unit.</p> <p>Consensus validators can configure their own <em>minimum gas price</em> (via
<code>consensus.tendermint.min_gas_price</code> configuration flag) and will refuse to
process transactions that have their gas price set below their minimum gas
price.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Currently, there is no mechanism to discover what minimum gas prices are used by
validators.</p> <p>For more details, see <a href="https://github.com/oasisprotocol/oasis-core/issues/2526" target="_blank" rel="noopener noreferrer">Oasis Core #2526<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h2 id="example-transactions"><a href="#example-transactions" class="header-anchor">#</a> Example transactions</h2> <p>Let's assume we have a staking account with address
<code>oasis1qr6swa6gsp2ukfjcdmka8wrkrwz294t7ev39nrw6</code> and generate some concrete
transactions for it.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>If you want to follow these examples yourself, make sure you've set the
<code>TX_FLAGS</code> environment variable as described in the <a href="#storing-base-and-signer-flags-in-an-environment-variable">Storing Base and Signer
flags in an environment variable</a> section.</p></div> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>To convert your entity's ID to a staking account address, see the
<a href="#obtaining-account-address-from-entity-s-id">Obtaining account address from entity's ID</a> section.</p></div> <h3 id="querying-account-info"><a href="#querying-account-info" class="header-anchor">#</a> Querying account info</h3> <p>To query our staking account's information, use the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account info <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --stake.account.address oasis1qr6swa6gsp2ukfjcdmka8wrkrwz294t7ev39nrw6 <span class="token punctuation">\</span>
  <span class="token operator">|</span> python3 -m json.tool
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>For a detailed explanation on querying account information, see <a href="#account-info">Account info</a>
section.</p></div> <p>At the beginning, this outputs:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;601492492765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">7</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11242384816640&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000000&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Account's general balance is ~601 tokens.</li> <li>Account's nonce is <code>7</code>.</li> <li>~11242 tokens are actively bounded to the escrow account.</li> <li>The amount of tokens that are currently debonding is 0.</li></ul> <h3 id="obtaining-transactions-gas-costs"><a href="#obtaining-transactions-gas-costs" class="header-anchor">#</a> Obtaining transactions' gas costs</h3> <p>As explained in the <a href="#common-transaction-flags">Common transaction flags</a> section, we can obtain gas costs
for different staking transactions from the genesis file by running:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> /localhostdir/genesis.json <span class="token operator">|</span> <span class="token punctuation">\</span>
  python3 -c <span class="token string">'import sys, json; \
  print(json.dumps(json.load(sys.stdin)[&quot;staking&quot;][&quot;params&quot;][&quot;gas_costs&quot;], indent=4))'</span>
</code></pre></div><p>For our network, this returns:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;add_escrow&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;burn&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reclaim_escrow&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;transfer&quot;</span><span class="token operator">:</span> <span class="token number">1000</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Hence, we will need to set the <code>--transaction.fee.gas</code> flag, i.e. the maximum
amount of gas a transaction can spend, in the following transactions to at least
1000 <em>gas units</em>.</p> <h3 id="transferring-tokens"><a href="#transferring-tokens" class="header-anchor">#</a> Transferring tokens</h3> <p>Let's start with token transfer transactions which transfer tokens from the
signer's account to the given destination account.</p> <p>Let's choose a destination account, e.g.
<code>oasis1qr3jc2yfhszpyy0daha2l9xjlkrxnzas0uaje4t3</code>, and <a href="#querying-account-info">check its current balance</a> (replacing our account's address with the destination
account's address):</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">1030</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that the chosen destination account currently has general balance
of 0 tokens.</p> <p>Let's generate a transfer transaction of 170 tokens, (i.e. 170 * 10^9 base
units), from our account to the chosen destination account:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_transfer <span class="token punctuation">\</span>
  <span class="token variable">$TX_FLAGS</span> <span class="token punctuation">\</span>
  --stake.amount <span class="token number">170000000000</span> <span class="token punctuation">\</span>
  --stake.transfer.destination oasis1qr3jc2yfhszpyy0daha2l9xjlkrxnzas0uaje4t3 <span class="token punctuation">\</span>
  --transaction.file tx_transfer.json <span class="token punctuation">\</span>
  --transaction.nonce <span class="token number">7</span> <span class="token punctuation">\</span>
  --transaction.fee.gas <span class="token number">1000</span> <span class="token punctuation">\</span>
  --transaction.fee.amount <span class="token number">2000</span>
</code></pre></div><p>To submit the generated transaction, we need to copy <code>tx_transfer.json</code> to the
online Oasis node (i.e. the <code>server</code>) and submit it from there:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node consensus submit_tx <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --transaction.file tx_transfer.json
</code></pre></div><p>Let's <a href="#querying-account-info">check both accounts' info</a> (first ours and then
the destination's):</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;431492490765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">8</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11242384816640&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000000000&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;170000000000&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">1030</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Our general balance decreased for 170 tokens and 2000 base units. The latter
corresponds to the fee that we specified we will pay for this transaction.</li> <li>Our account's nonce increased to <code>8</code>.</li> <li>Destination account's general balance increased for 170 tokens.</li></ul> <h3 id="escrowing-tokens"><a href="#escrowing-tokens" class="header-anchor">#</a> Escrowing tokens</h3> <p>In this example we will put 208 tokens (i.e. 208 * 10^9 base units) to our own
escrow account.</p> <p>First, let's generate an escrow transaction and store it to <code>tx_escrow.json</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_escrow <span class="token punctuation">\</span>
  <span class="token variable">$TX_FLAGS</span> <span class="token punctuation">\</span>
  --stake.amount <span class="token number">208000000000</span> <span class="token punctuation">\</span>
  --stake.escrow.account oasis1qr6swa6gsp2ukfjcdmka8wrkrwz294t7ev39nrw6 <span class="token punctuation">\</span>
  --transaction.file tx_escrow.json <span class="token punctuation">\</span>
  --transaction.nonce <span class="token number">8</span> <span class="token punctuation">\</span>
  --transaction.fee.gas <span class="token number">1000</span> <span class="token punctuation">\</span>
  --transaction.fee.amount <span class="token number">2000</span>
</code></pre></div><p>To submit the generated transaction, we need to copy <code>tx_escrow.json</code> to the
online Oasis node (i.e. the <code>server</code>) and submit it from there:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node consensus submit_tx <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --transaction.file tx_escrow.json
</code></pre></div><p>Let's <a href="#querying-account-info">check our account's info</a>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;223492488765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">9</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11450384816640&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10185014125910&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Our general balance decreased for 208 tokens and 2000 base units. The latter
corresponds to the fee that we specified we will pay for this transaction.</li> <li>Our account's nonce increased to <code>9</code>.</li> <li>Our escrow account's active balance increased for 208 tokens.</li> <li>The total number of shares in our escrow account's active balance
increased from 10000000000000 to 10185014125910.</li></ul> <p>When a delegator delegates some amount of tokens to a staking account, the
delegator receives the number of shares proportional to the current
<em>share price</em> (in base units) calculated from the total number of base units
delegated to a staking account so far and the number of shares issued so far:</p> <div class="language-text extra-class"><pre class="language-text"><code>shares_per_base_unit = account_issued_shares / account_delegated_base_units
</code></pre></div><p>In our case, the current share price (i.e. <code>shares_per_base_unit</code>) is
10000000000000 / 11242384816640 which is 0.8894909899542729.</p> <p>For 208 tokens, the amount of newly issued shares is thus 208 * 10^9 *
0.8894909899542729 which is 185014125910.48877 (rounded to 185014125910).</p> <h3 id="reclaiming-escrowed-tokens"><a href="#reclaiming-escrowed-tokens" class="header-anchor">#</a> Reclaiming escrowed tokens</h3> <p>When we want to reclaim escrowed tokens, we can't do that directly. Instead, we
need to specify the number of shares we want to reclaim from an escrow account.</p> <p>For example, to reclaim 357 billion shares from an escrow account, we need to
generate the following reclaim escrow transaction:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_reclaim_escrow <span class="token punctuation">\</span>
  <span class="token variable">$TX_FLAGS</span> <span class="token punctuation">\</span>
  --stake.shares <span class="token number">357000000000</span> <span class="token punctuation">\</span>
  --stake.escrow.account oasis1qr6swa6gsp2ukfjcdmka8wrkrwz294t7ev39nrw6 <span class="token punctuation">\</span>
  --transaction.file tx_reclaim.json <span class="token punctuation">\</span>
  --transaction.nonce <span class="token number">9</span> <span class="token punctuation">\</span>
  --transaction.fee.gas <span class="token number">1000</span> <span class="token punctuation">\</span>
  --transaction.fee.amount <span class="token number">2000</span>
</code></pre></div><p>To submit the generated transaction, we need to copy <code>tx_reclaim.json</code> to the
online Oasis node (i.e. the <code>server</code>) and submit it from there:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node consensus submit_tx <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --transaction.file tx_reclaim.json
</code></pre></div><p>Let's <a href="#querying-account-info">check our account's info</a>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;223492486765&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11049031678686&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9828014125910&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;debonding&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;balance&quot;</span><span class="token operator">:</span> <span class="token string">&quot;401353137954&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;total_shares&quot;</span><span class="token operator">:</span> <span class="token string">&quot;401353137954&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We can observe that:</p> <ul><li>Our general balance decreased for 2000 base units. This corresponds to the fee
that we specified we will pay for this transaction.</li> <li>Our account's nonce increased to <code>10</code>.</li> <li>Our escrow account's active number of shares decreased for 357 billion shares
to 9828014125910.</li> <li>Our escrow account's active balance decreased for 401353137954 base units and
is now 11049031678686 base units.</li> <li>Our escrow account's debonding balance increased to 401353137954 base units
and its number of shares to the same amount.</li></ul> <p>When a delegator wants to reclaim a certain number of escrowed tokens, the
<em>base unit price</em> (in shares) must be calculated based on the escrow account's
current active balance and the number of issued shares:</p> <div class="language-text extra-class"><pre class="language-text"><code>base_units_per_share = account_delegated_base_units / account_issued_shares
</code></pre></div><p>In our case, the current base unit price (i.e. <code>base_units_per_share</code>) is
11450384816640 / 10185014125910 which is 1.124238481664054 base unit per share.</p> <p>For 357 billion shares, the amount of base units that will be reclaimed is thus
357 * 10^9 * 1.124238481664054 which is 401353137954.06726 (rounded to
401353137954).</p> <p>Hence, the escrow account's active balance decreased for 401353137954 base units
and the debonding balance increased for the same amount.</p> <div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>While the number of debonding shares currently equals the number of base units
that are currently subject to debonding and hence, the amount of tokens we can
except to reclaim after debonding period is over is a little over 401 tokens,
there is no guarantee that this stays the same until the end of the debonding
period since any slashing could change shares' price.</p></div> <p>The debonding period is specified by the <code>staking.params.debonding_interval</code>
consensus parameter and is represented as a number of epochs that need to pass.</p> <p>To obtain its value from the genesis file, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> /localhostdir/genesis.json <span class="token operator">|</span> <span class="token punctuation">\</span>
  python3 -c <span class="token string">'import sys, json; \
  print(json.load(sys.stdin)[&quot;staking&quot;][&quot;params&quot;][&quot;debonding_interval&quot;])'</span>
</code></pre></div><p>For our example network, this returns:</p> <div class="language-text extra-class"><pre class="language-text"><code>10
</code></pre></div><p>After the debonding period has passed, the network will automatically move our
escrow account's active debonding balance into our escrow account's active
balance.</p> <h3 id="amending-a-commission-schedule"><a href="#amending-a-commission-schedule" class="header-anchor">#</a> Amending a commission schedule</h3> <p>We can configure our account to take a commission on staking rewards given to
our node(s).
The commission rate must be within bounds, which we can also configure.</p> <p>Let's generate a transaction to:</p> <ul><li>tell everyone that our bounds allow us to set any rate (0% - 100%), and</li> <li>we'll take 50%.</li></ul> <p>We're not allowed to change the commission bounds too close in near future, so
we'd have to make changes a number of epochs in the future.</p> <p>The commission schedule rules are specified by the
<code>staking.params.commission_schedule_rules</code> consensus parameter.</p> <p>To obtain its value from the genesis file, run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> /localhostdir/genesis.json <span class="token operator">|</span> <span class="token punctuation">\</span>
  python3 -c <span class="token string">'import sys, json; \
  rules = json.load(sys.stdin)[&quot;staking&quot;][&quot;params&quot;][&quot;commission_schedule_rules&quot;]; \
  print(json.dumps(rules, indent=4))'</span>
</code></pre></div><p>For our example network this returns:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;rate_change_interval&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rate_bound_lead&quot;</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
    <span class="token property">&quot;max_rate_steps&quot;</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
    <span class="token property">&quot;max_bound_steps&quot;</span><span class="token operator">:</span> <span class="token number">21</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This means that we must submit a commission rate bound at least <code>14</code> epochs
in advance (<code>rate_bound_lead</code>) and that we can change it on every epoch
(<code>rate_change_interval</code>).</p> <p>The <code>max_rate_steps</code> and <code>max_bound_steps</code> determine the maximum number of
commission rate steps and rate bound steps, respectively.</p> <p>In the example, we're setting the bounds to start on epoch 16.
An account's default bounds are 0% maximum, so we have to wait until our new
bounds go into effect to raise our rate to 50%.
Because of that, we'll specify that our rate also starts on epoch 16.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_amend_commission_schedule <span class="token punctuation">\</span>
  <span class="token variable">$TX_FLAGS</span> <span class="token punctuation">\</span>
  --stake.commission_schedule.bounds <span class="token number">16</span>/0/100000 <span class="token punctuation">\</span>
  --stake.commission_schedule.rates <span class="token number">16</span>/50000 <span class="token punctuation">\</span>
  --transaction.file tx_amend_commission_schedule.json <span class="token punctuation">\</span>
  --transaction.nonce <span class="token number">11</span> <span class="token punctuation">\</span>
  --transaction.fee.gas <span class="token number">1000</span> <span class="token punctuation">\</span>
  --transaction.fee.amount <span class="token number">2000</span>
</code></pre></div><p>Rates and minimum/maximum rates are in units of 1/100,000, so <code>0</code>, <code>50000</code>, and
<code>100000</code> come out to 0%, 50%, and 100%, respectively.</p> <p>To submit the generated transaction, we need to copy
<code>tx_amend_commission_schedule.json</code> to the online Oasis node (i.e. the <code>server</code>)
and submit it from there:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node consensus submit_tx <span class="token punctuation">\</span>
  -a <span class="token variable">$ADDR</span> <span class="token punctuation">\</span>
  --transaction.file tx_amend_commission_schedule.json
</code></pre></div><p>After that, we can <a href="#querying-account-info">check our account's info</a>, and we should see something like
this:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ...
        <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token number">11</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ...
        <span class="token property">&quot;commission_schedule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;rates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
                <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50000&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;bounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
                <span class="token property">&quot;rate_min&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;rate_max&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100000&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Node operators collect commissions when their node earns a staking reward for
delegators.
A validator node earns a staking reward for participating in the consensus
protocol each epoch.
The commission rate is a fraction of the staking reward.</p> <p>For example, if our node earns a reward of 0.007 tokens, 0.0035 tokens are added
to the escrow pool (increasing the value of our escrow pool shares uniformly),
and 0.0035 tokens are given to us (issuing us new shares as if we manually
deposited them).</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>It is also possible to set multiple commission rate steps and rate bound steps
by passing the <code>--stake.commission_schedule.rates</code> and
<code>--stake.commission_schedule.bounds</code> CLI flags multiple times.</p> <p>For example, setting multiple commission rate steps and rate bound steps with:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node stake account gen_amend_commission_schedule <span class="token punctuation">\</span>
  <span class="token punctuation">..</span>.
  --stake.commission_schedule.bounds <span class="token number">32</span>/10000/50000 <span class="token punctuation">\</span>
  --stake.commission_schedule.bounds <span class="token number">64</span>/10000/30000 <span class="token punctuation">\</span>
  --stake.commission_schedule.rates <span class="token number">32</span>/50000 <span class="token punctuation">\</span>
  --stake.commission_schedule.rates <span class="token number">40</span>/40000 <span class="token punctuation">\</span>
  --stake.commission_schedule.rates <span class="token number">48</span>/30000 <span class="token punctuation">\</span>
  --stake.commission_schedule.rates <span class="token number">56</span>/25000 <span class="token punctuation">\</span>
  --stake.commission_schedule.rates <span class="token number">64</span>/20000 <span class="token punctuation">\</span>
  <span class="token punctuation">..</span>.
</code></pre></div><p>would result in the following commission schedule when <a href="#querying-account-info">checking a account's
info</a>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;general&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ...
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;escrow&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        ...
        <span class="token property">&quot;commission_schedule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;rates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50000&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;40000&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">48</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;30000&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">56</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;25000&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">64</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;rate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20000&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;bounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;rate_min&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;rate_max&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50000&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">64</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;rate_min&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;rate_max&quot;</span><span class="token operator">:</span> <span class="token string">&quot;30000&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>To troubleshoot an amendment that's rejected, consult our <a href="https://github.com/oasisprotocol/oasis-core/blob/0dee03d75b3e8cfb36293fbf8ecaaec6f45dd3a5/go/staking/api/commission_test.go#L61-L610" target="_blank" rel="noopener noreferrer">compendium of 23
common ways for a commission schedule amendment to fail<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/oasisprotocol/docs/edit/master/src/src/operators/stake-management.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/operators/current-testnet-parameters.html" class="prev">
        Current Testnet Parameters
      </a></span> <span class="next"><a href="/operators/sentry-node.html">
        Sentry Node Architecture
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.581d73a6.js" defer></script><script src="/assets/js/2.00a45a85.js" defer></script><script src="/assets/js/24.b87dffc3.js" defer></script>
  </body>
</html>
